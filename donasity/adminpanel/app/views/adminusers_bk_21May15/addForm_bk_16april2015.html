<link rel="stylesheet" type="text/css" href='{#RESOURCES#}css/style.css'>

<script type="text/javascript">

	$(document).ready(function()
	{
		$('.viewmoreBtn i').click(function()
		{
			 $(this).toggleClass("fa-plus fa-minus");
			 $(this).closest('.row').find('.viewmorSection').slideToggle();
			
		});
		
		$('input[name="module[]"]').click(function(){
			if($(this).prop('checked')==true)	
			{
				checkelement($(this));
			}
			else
			{
				uncheckelement($(this));
			}
		});
	})
	
	function checkelement(element)
	{
		$.ajax(
		{
			type:'POST',
			dataType:'json',
			data:
			{
				ModuleID:element.attr('id'),
			},
			url:SITEURL+'adminusers/getchild/',
			success:function(data)
			{
				for(obj in data)
				{
					ID	= data[obj];
					$('#id_'+ID).prop("checked",true);		
				}
			}
		});
	}
	
	function uncheckelement(element)
	{
		$.ajax(
		{
			type:'POST',
			dataType:'json',
			data:
			{
				ModuleID:element.attr('id'),
			},
			url:SITEURL+'adminusers/getchild/',
			success:function(data)
			{
				for(obj in data)
				{
					ID	= data[obj];
					$('#id_'+ID).prop("checked",false);		
				}
			}
		});	
	}
	
	
	
	function DeleteUser(userID)
	{
		if(confirm("Are you sure, you want to delete this user"))
		{
			location.href=SITEURL+"adminusers/index/delete-admin-user/"+userID;	
		}	
	}
</script>
<script type="text/javascript" src='{#RESOURCES#}js/validateadminusers.js'></script>
<div id="rightSection">
  <div class="rightPannel">
    <div class="breadcrumb">
      <ul>
        <li title="Dashboard"><a href='{#URL#}home/'><img src='{#RESOURCES#}img/dashboard_thumb.png'/>Dashboard</a></li>
        <li>&nbsp;»&nbsp;</li>
        <li title="Admin Users"><a href='{#URL#}adminusers'>Admin Users</a></li>        
        <li>&nbsp;»&nbsp;</li>
        <li title="Admin User - Add">Admin User - {if="$case=='editadmin'"}Edit {else} Add {/if}</li>
      </ul>
    </div>
    <div class="contentSection">
    <form id="adminuserform" name="adminuserform" class="sky-form" method="post"  {if="$case=='editadmin'"}action='{#URL#}adminusers/index/update-admin-user/' {else}
     action='{#URL#}adminusers/index/insert-admin-user/'{/if} autocomplete="off">
     {if="$case=='editadmin'"}
            <input type="hidden" name="adminuserid" id="adminuserid" value="{$AdminUserID}"/>
            {/if}
      <div class="pageHeader text-left">
      <li class="fa fa-fw fa-file-text iColor"></li>&nbsp;Admin User- {if="$case=='editadmin'"}Edit {else}Add{/if}
      <div class="pull-right margin-right-20">
          {if="$case=='editadmin'"}
          <button type="button" class="btn btn-primary btn-danger" title="Update Static Pages" value="Delete" onclick="DeleteUser('{$AdminUserID|keyEncrypt}')">
          <i class="fa fa-trash-o"></i>&nbsp;Delete</button>
          <button type="submit" class="btn btn-primary" title="Update Static Pages" value="Save Changes">
          <i class="fa fa-save"></i>&nbsp;Save Changes</button>
          {else}
          <button type="submit" class="btn btn-primary" title="Add Static Page" value="Save">
          <i class="fa fa-save"></i>&nbsp;Save</button>
          {/if}
          <a href='{#URL#}adminusers' class="btn btn-primary" title="Add Product"><i class="fa fa-list-ul"></i>&nbsp;User List</a>
      </div>
      </div>
      {include="common/message"}
      <div class="">
				<fieldset>
				<div class="row">
					<div class="sky-form-headingsection psTitle">
						<div class="sky-form-heading pull-left">Basic Admin Details</div>
						<div class="viewmoreBtn pull-right">
							<i class="fa fa-minus"></i>
						 </div>
					</div>
					<div class="viewmorSection" >
					<!--<div class="sky-form-subheading">Sub Heading</div>-->
					<section class="col col-6">
						<label class="label">First Name</label>
						<label class="input">
							<input type="text" id="firstName" name="firstName" placeholder="Enter first name "  value="{$AdminUserDetails.Admin_FirstName}">
						</label>
					</section>
					<section class="col col-6">
						<label class="label">Last Name</label>
						<label class="input">
							<input type="text" id="lastName" name="lastName"    placeholder="Enter last name"
                             value="{$AdminUserDetails.Admin_LastName}">
						</label>
					</section>
					<section class="col col-6">
						<label class="label">Email Address</label>
						<label class="input">
							<input type="text" id="emailAddress" name="emailAddress" placeholder="Enter email address"   value="{$AdminUserDetails.Admin_EmailID}">
						</label>
					</section>
					<section class="col col-6">
						<label class="label">User Name</label>
						<label class="input">
							<input type="text" id="userName" placeholder="Enter user name" name="userName"   value="{$AdminUserDetails.Admin_UserName}">
						</label>
					</section>
                    <section class="col col-6">
						<label class="label">Password</label>
						<label class="input">
							<input type="password" id="password" name="password" placeholder="Enter password"  maxlength="12"  value="{$AdminUserDetails.Admin_Password|PassDec}">
						</label>
					</section>
					<section class="col col-6 margin-top-30">
						<label class="checkbox">
                                <input type="checkbox" id="isActive" name="isActive"  value="1" {if="$AdminUserDetails.Admin_Status=='1'"}checked="checked" {/if}><i></i>
                                Admin Status
                         </label>
					</section>
				</div>
				</div>				
				</fieldset>
				
                <fieldset>
				<div class="row">
                	<div class="sky-form-headingsection psTitle">
						<div class="sky-form-heading pull-left">Admin Module Rights</div>
                        <div class="viewmoreBtn pull-right">
							<i class="fa fa-minus"></i>
						 </div>
					</div>
                    <div class="viewmorSection" >
					<section class="col col-4">
                    <div class="moduleRightSection">
                    	<ul>{$arrModule|dump}
                        	{loop="arrModule"}
                            <li>
                            <label class="checkbox">
                            {$value.level}<input type="checkbox" id="id_{$value.Module_ID}" name="module[]" value="{$key}"  {if="in_array($key,$AdminUserDetails.Admin_AccessModuleIDs)"}checked="checked"{/if}> <i></i><span class=" {if="$value.Depth=='1'"}text-bold {/if} ">{$value.Module_Caption}</span>
                             </label>
                            </li>                           
                            {/loop}
                        </ul>	
                    </div>
                   </section>
					</div>
				</div>
                </fieldset>
                
				<fieldset>
				<div class="row">
                	<div class="sky-form-headingsection psTitle">
						<div class="sky-form-heading pull-left">Admin Login Security Details</div>
                        <div class="viewmoreBtn pull-right">
							<i class="fa fa-minus"></i>
						</div>
					</div>
                    <div class="viewmorSection" >					             
                        <section class="col col-4">
                            <label class="select">Access Period</label>
                            <label class="select">
                                <select name="accessPeriod" id="accessPeriod">
                                    {loop="$accessperiod"}
                                    <option value="{$key}" {if="$AdminUserDetails.Admin_AccessPeriod==$key"}selected="selected"{/if}>{$value}</option>
                                    {/loop}
                                </select>
                                <i></i>
                            </label>
                        </section>                       
                        <section class="col col-8">
                            <label class="checkbox">
                            <input type="checkbox" id="loginWithIP" name="loginWithIP"  value="1" {if="$AdminUserDetails.Admin_LoginWithIP=='1'"}checked="checked" {/if}><i></i>
                            Can login with only below IP addresses
                            </label>                 
                       
                            <label class="textarea display-block">
                                <textarea rows="2" name="loginIPAddresses" id="loginIPAddresses" placeholder="Enter IP addresses with comma separated">{$AdminUserDetails.Admin_AccessIPAddress}</textarea>
                            </label>
                        </section>                        
                        <section class="">
                        	<label class="label">Remark</label>
                            <label class="textarea">
                                <textarea rows="2" name="remark" id="remark" placeholder="Enter remark">{$AdminUserDetails.Admin_Remarks}</textarea>
                            </label>
                        </section>
                    </div> 
                </div>                
				</fieldset>
                <fieldset>
				<div class="row">
                	<div class="sky-form-headingsection psTitle">
						<div class="sky-form-heading pull-left">Admin Log Details</div>
                        <div class="viewmoreBtn pull-right">
							<i class="fa fa-minus"></i>
						</div>
					</div>
                    <div class="viewmorSection">					             
                        <section class="col col-12">
                            <label class="label pull-left">Last Modified By : </label>
                           	<label class="label pull-left text-bold">{$AdminUserDetails.Admin_LastUpdatedBy}</label>                            
                        </section> 
                        <section class="col col-12">                            
                            <label class="label pull-left">Added Date : </label>
                           	<label class="label pull-left text-bold">{$AdminUserDetails.Admin_AddedDate|formatDate:'F d, Y'}</label>
                        </section> 
                        <section class="col col-12">                            
                            <label class="label pull-left">Last Modified Date : </label>
                           	<label class="label pull-left text-bold">{$AdminUserDetails.Admin_LastUpdatedDate|formatDate:'F d, Y'}</label>
                        </section> 
                    </div> 
                </div>                
				</fieldset>
                <fieldset>
                	<section>
						{if="$case=='editadmin'"}
                        	<button type="submit" class="btn btn-primary" title="Add Static Page" value="Save Changes">
                            <i class="fa fa-save"></i>&nbsp;Save Changes</button>
                        {else}    
                        	<button type="submit" class="btn btn-primary" title="Add Static Page" value="Save">
                            <i class="fa fa-save"></i>&nbsp;Save</button>
                        {/if}
					</section>
                </fieldset>		 
      </div>
      </form>
    </div>
  </div>
</div>